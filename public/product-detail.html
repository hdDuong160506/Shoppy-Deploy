<!doctype html>
<html lang="vi">

<head>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Chi ti·∫øt s·∫£n ph·∫©m - SHOPPY</title>
    <link rel="icon" type="image/png" href="images/logo/logo1.png">
    <link rel="stylesheet" href="css/product-detail.css">
</head>

<body>
    <header class="navbar">
        <div class="navbar-top">
            <div class="nav-links-left">
                <a href="seller.html" class="auth-link" id="seller-link">K√™nh Ng∆∞·ªùi B√°n</a>
                <span>|</span>
                <a href="cooperate.html" class="auth-link" id="seller-link">H·ª£p t√°c v·ªõi ch√∫ng t√¥i</a>
            </div>
            <div class="nav-links-right" style="display: flex; align-items: center; gap: 12px;">
                <a href="support.html" class="auth-link" id="support-link"
                    style="display: flex; align-items: center; gap: 4px;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 0 24 24" width="18px"
                        fill="#FFFFFF">
                        <path d="M0 0h24v24H0z" fill="none" />
                        <path
                            d="M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z" />
                    </svg>
                    H·ªó Tr·ª£
                </a>
                <a href="#" class="auth-link" id="account-link" onclick="window.location.href='account.html'">T√†i
                    Kho·∫£n</a>
                <div id="logout-link" title="ƒêƒÉng Xu·∫•t" style="margin-left: 8px; cursor: pointer; display: none;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px"
                        fill="#FFFFFF">
                        <path
                            d="M200-120q-33 0-56.5-23.5T120-200v-560q0-33 23.5-56.5T200-840h280v80H200v560h280v80H200Zm440-240-56-56 94-94H440v-80h238l-94-94 56-56 200 200-200 200Z" />
                    </svg>
                </div>
            </div>
        </div>
        <div class="navbar-main">
            <div class="nav-left">
                <a href="index.html" class="brand-link">
                    <img src="images/logo/logo1.png" alt="Logo" class="brand-logo">
                    <div class="brand">SHOPPY</div>
                </a>
            </div>
            <div class="nav-center-search">
                <form id="search_form" onsubmit="event.preventDefault();">

                    <input type="text" name="search" id="search_input" placeholder="T√¨m ki·∫øm tr√™n Shoppy..."
                        autocomplete="off" />

                    <div class="search-actions-right">
                        <button type="button" onclick="openImageSearch()" class="icon-btn" title="T√¨m b·∫±ng h√¨nh ·∫£nh">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#5f6368">
                                <path
                                    d="M200-200h560q33 0 56.5-23.5T840-280v-480q0-33-23.5-56.5T760-840H200q-33 0-56.5 23.5T120-760v480q0 33 23.5 56.5T200-200Zm0-80v-480h560v480H200Zm40-80 140-180 100 120 160-200 160 240H240Zm-40 80h560-560Z" />
                            </svg>
                        </button>

                        <button type="button" onclick="startVoiceSearch()" class="icon-btn" title="T√¨m b·∫±ng gi·ªçng n√≥i">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#5f6368">
                                <path
                                    d="M480-400q-50 0-85-35t-35-85v-240q0-50 35-85t85-35q50 0 85 35t35 85v240q0 50-35 85t-85 35Zm0-240Zm-40 520v-123q-104-14-172-93t-68-184h80q0 83 58.5 141.5T480-320q83 0 141.5-58.5T680-520h80q0 105-68 184t-172 93v123h-80Zm40-360q17 0 28.5-11.5T520-520v-240q0-17-11.5-28.5T480-800q-17 0-28.5 11.5T440-760v240q0 17 11.5 28.5T480-480Z" />
                            </svg>
                        </button>

                        <button type="submit" class="icon-btn search-submit" title="T√¨m ki·∫øm">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px"
                                fill="#1867f8">
                                <path
                                    d="M784-120 532-372q-30 24-69 38t-83 14q-109 0-184.5-75.5T120-580q0-109 75.5-184.5T380-840q109 0 184.5 75.5T640-580q0 44-14 83t-38 69l252 252-56 56ZM380-400q75 0 127.5-52.5T560-580q0-75-52.5-127.5T380-760q-75 0-127.5 52.5T200-580q0 75 52.5 127.5T380-400Z" />
                            </svg>
                        </button>
                    </div>
                </form>
                <div id="search_suggestions"></div>
            </div>

            <div class="nav-right">
                <button class="cart-btn-icon" id="open-cart">
                    <svg xmlns="http://www.w3.org/2000/svg" height="26px" viewBox="0 -960 960 960" width="26px"
                        fill="white">
                        <path
                            d="M280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM246-720l96 200h280l110-200H246Zm-38-80h590q23 0 35 20.5t1 41.5L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68-39.5t-2-78.5l54-98-144-304H40v-80h130l38 80Zm134 280h280-280Z" />
                    </svg>
                    <span class="cart-count-bubble" id="cart-count" style="display: none;">0</span>
                </button>
            </div>
        </div>
    </header>
    <nav class="breadcrumb">
        <a href="index.html">Trang ch·ªß</a> /
        <span id="breadcrumb-summary-link"></span> /
        <span>Chi ti·∫øt c·ª≠a h√†ng</span>
    </nav>

    <main>
        <div class="product-container">
            <div class="product-image"><img id="product-image-main" src="" alt="·∫¢nh s·∫£n ph·∫©m"></div>
            <div class="product-info">
                <h2 id="product-name">ƒêang t·∫£i...</h2>
                <div id="product-subtitle" style="margin-bottom: 15px; color: #555;"></div>
                <div class="price" id="product-price">0</div>
                <h3 class="section-title">M√¥ t·∫£ s·∫£n ph·∫©m</h3>
                <p class="product-description" id="product-description">ƒêang t·∫£i m√¥ t·∫£...</p>

                <div class="actions-container">
                    <div class="quantity-selector">
                        <span>S·ªë L∆∞·ª£ng</span>
                        <button class="qty-btn" id="qty-minus">-</button>
                        <input type="text" class="qty-input" id="qty-input" value="1" readonly>
                        <button class="qty-btn" id="qty-plus">+</button>
                    </div>
                    <div class="buttons">
                        <button class="btn-add-cart" id="add-to-cart-btn">Th√™m v√†o gi·ªè h√†ng</button>
                        <button class="btn-map" id="map-btn">Ch·ªâ ƒë∆∞·ªùng</button>
                        <button class="btn-buy-now" id="buy-now-btn">Mua ngay</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="reviews-section">
            <div class="review-header">
                <h3 style="margin: 0;">ƒê√°nh gi√° s·∫£n ph·∫©m</h3>
                <div id="review-stats" style="display: flex; align-items: center; gap: 8px; font-size: 16px;">
                    <span style="color:#999; font-style: italic;">(ƒêang t·∫£i...)</span>
                </div>
            </div>
            <div class="review-filters">
                <button class="filter-btn active" onclick="filterReviews('all')">T·∫•t c·∫£</button>
                <button class="filter-btn" onclick="filterReviews('newest')">M·ªõi nh·∫•t</button>
                <button class="filter-btn" onclick="filterReviews('oldest')">C≈© nh·∫•t</button>
                <button class="filter-btn" onclick="filterReviews('highest')">ƒê√°nh gi√° cao</button>
                <button class="filter-btn" onclick="filterReviews('lowest')">ƒê√°nh gi√° th·∫•p</button>
            </div>
            <div id="review-form-container" class="review-form" style="display: none;">
                <h4 style="margin-bottom: 15px;">Vi·∫øt ƒë√°nh gi√° c·ªßa b·∫°n</h4>
                <div class="star-rating-input">
                    <input type="radio" id="star5" name="rating" value="5"><label for="star5" title="5 sao">‚òÖ</label>
                    <input type="radio" id="star4" name="rating" value="4"><label for="star4" title="4 sao">‚òÖ</label>
                    <input type="radio" id="star3" name="rating" value="3"><label for="star3" title="3 sao">‚òÖ</label>
                    <input type="radio" id="star2" name="rating" value="2"><label for="star2" title="2 sao">‚òÖ</label>
                    <input type="radio" id="star1" name="rating" value="1"><label for="star1" title="1 sao">‚òÖ</label>
                </div>
                <div class="form-group">
                    <textarea id="review-comment" placeholder="Chia s·∫ª c·∫£m nh·∫≠n c·ªßa b·∫°n v·ªÅ s·∫£n ph·∫©m n√†y..."></textarea>
                </div>
                <button class="btn-submit-review" id="btn-submit-review">G·ª≠i ƒë√°nh gi√°</button>
            </div>
            <div id="login-prompt" style="margin-top: 20px; color: #666; display:none; text-align: center;">
                Vui l√≤ng <a href="account.html" style="color:#00aaff; font-weight: bold;">ƒëƒÉng nh·∫≠p</a> ƒë·ªÉ vi·∫øt ƒë√°nh
                gi√°.
            </div>
            <div id="reviews-list" class="review-list">
                <p style="color:#777; font-style: italic;">Ch∆∞a c√≥ ƒë√°nh gi√° n√†o.</p>
            </div>

        </div>
    </main>

    <div id="cart-popup">
        <h3 style="margin-top:0;">üõí Gi·ªè h√†ng c·ªßa b·∫°n</h3>
        <div class="cart-list" id="cart-list">
            <div style="color:#888">Gi·ªè h√†ng tr·ªëng</div>
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
            <div>T·ªïng:</div>
            <div style="font-weight:700" id="cart-total">0‚Ç´</div>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
            <button class="cart-btn" id="checkout">Xem Gi·ªè h√†ng</button>
            <button class="small-btn" id="close-cart" style="margin-left:auto;">ƒê√≥ng</button>
        </div>
    </div>

    <div id="voice_popup" style="display:none;">
        <div class="voice-popup-content">
            <h5>üéôÔ∏è ƒêang nghe...</h5>
            <p>H√£y n√≥i t·ª´ kh√≥a t√¨m ki·∫øm c·ªßa b·∫°n</p>
            <p id="transcript_display" style="min-height: 25px; color: #1867f8; font-weight: bold; margin: 15px 0;"></p>
            <div class="listening-dot">‚Ä¢</div>
            <button type="button" onclick="cancelVoiceSearch()"
                style="padding:10px 20px; background:#666; color:white; border:none; border-radius:8px; cursor:pointer; margin-top:10px;">H·ªßy</button>
        </div>
    </div>
    <div id="image_search_popup" class="modal-overlay">
        <div class="image-search-modal">
            <div class="modal-header">
                <h3>T√¨m ki·∫øm b·∫±ng h√¨nh ·∫£nh</h3>
                <button class="close-btn" onclick="closeImageSearch()">√ó</button>
            </div>

            <div class="image-tabs">
                <button class="tab-button active" data-tab="upload" onclick="switchImageTab('upload')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z" />
                    </svg>
                    Upload ·∫¢nh
                </button>
                <button class="tab-button" data-tab="paste" onclick="switchImageTab('paste')">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M19 2h-4.18C14.4.84 13.3 0 12 0c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm7 18H5V4h2v3h10V4h2v16z" />
                    </svg>
                    D√°n URL/Base64
                </button>
            </div>

            <div class="tab-contents">
                <div id="upload-tab" class="tab-panel active">
                    <div class="upload-zone" id="imageUploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <p class="upload-text">K√©o th·∫£ ·∫£nh v√†o ƒë√¢y</p>
                        <p class="upload-subtext">ho·∫∑c</p>
                        <button type="button" class="browse-btn" id="browseBtn">
                            Ch·ªçn File
                        </button>
                        <input type="file" id="imageFileInput" accept="image/*" style="display: none;">
                        <p class="upload-hint">H·ªó tr·ª£: JPG, PNG, GIF (T·ªëi ƒëa 5MB)</p>
                    </div>

                    <div id="uploadPreviewContainer" class="preview-container" style="display: none;">
                        <img id="imagePreview" alt="Preview">
                        <button class="remove-image-btn" onclick="clearUploadImage()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                            </svg>
                            X√≥a ·∫£nh
                        </button>
                    </div>
                </div>

                <div id="paste-tab" class="tab-panel">
                    <div class="paste-zone">
                        <textarea id="imagePasteInput"
                            placeholder="D√°n URL ·∫£nh ho·∫∑c Base64 string ·ªü ƒë√¢y...&#10;&#10;V√≠ d·ª•:&#10;‚Ä¢ https://example.com/image.jpg&#10;‚Ä¢ data:image/png;base64,iVBORw0T..."></textarea>
                    </div>

                    <div id="pastePreviewContainer" class="preview-container" style="display: none;">
                        <img id="pastePreview" alt="Paste Preview">
                        <button class="remove-image-btn" onclick="clearPasteImage()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                            </svg>
                            X√≥a ·∫£nh
                        </button>
                    </div>
                </div>
            </div>

            <div id="imageSearchError" class="error-message"></div>

            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeImageSearch()">
                    H·ªßy
                </button>
                <button type="button" class="btn-primary" onclick="searchWithImage()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                    T√¨m Ki·∫øm
                </button>
            </div>
        </div>
    </div>
    <footer>
        <div class="footer">
            <div class="footer-section">
                <div class="footer-logo">
                    <h2 style="color:#00aaff; font-size:28px;">SHOPPY</h2>
                    <p style="color:#ccc;">Web b√°n h√†ng h√†ng ƒë·∫ßu Vi·ªát Nam.</p>
                </div>
                <h3>ƒê·ªëi t√°c thanh to√°n</h3>
                <div class="partners">
                    <img src="images/payment/visa.png" alt="Visa">
                    <img src="images/payment/mastercard.png" alt="Mastercard">
                    <img src="images/payment/momo.png" alt="MoMo">
                    <img src="images/payment/vnpay.jpg" alt="VNPay">
                    <img src="images/payment/vietqr.png" alt="VietQR">
                    <img src="images/payment/mbbank.png" alt="MB Bank">
                    <img src="images/payment/viettinbank.png" alt="Viettinbank">
                </div>
            </div>

            <div class="footer-section">
                <h3>V·ªÅ Shoppy</h3>
                <ul>
                    <li><a href="about.html" class="auth-link" id="support-link">Gi·ªõi thi·ªáu</a></li>
                    <li><a href="contact.html" class="auth-link" id="support-link">Li√™n h·ªá</a></li>
                    <li><a href="support.html" class="auth-link" id="support-link">H·ªó tr·ª£</a></li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>S·∫£n ph·∫©m</h3>
                <ul>
                    <li><a href="#" onclick="return false;" style="cursor: default; opacity: 0.8;">ƒê·∫∑c s·∫£n & Qu√†
                            t·∫∑ng</a></li>
                    <li><a href="#" onclick="return false;" style="cursor: default; opacity: 0.8;">·∫®m th·ª±c ƒê·∫∑c tr∆∞ng</a>
                    </li>
                    <li><a href="#" onclick="return false;" style="cursor: default; opacity: 0.8;">Th·ªùi trang Truy·ªÅn
                            th·ªëng</a></li>
                    <li><a href="#" onclick="return false;" style="cursor: default; opacity: 0.8;">Th·ªß c√¥ng M·ªπ ngh·ªá</a>
                    </li>
                </ul>
            </div>

            <div class="footer-section">
                <h3>Ch√≠nh s√°ch</h3>
                <ul>
                    <li><a style="cursor: default; opacity: 0.8;" tabindex="-1">Ch√≠nh s√°ch b·∫£o m·∫≠t</a></li>
                    <li><a style="cursor: default; opacity: 0.8;" tabindex="-1">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</a></li>
                    <li><a style="cursor: default; opacity: 0.8;" tabindex="-1">ƒê·ªïi tr·∫£ & Ho√†n ti·ªÅn</a></li>
                </ul>


                <h3 style="margin-top:20px;">Theo d√µi ch√∫ng t√¥i</h3>
                <div class="social-icons">
                    <a href="https://www.facebook.com/profile.php?id=61584797843680" target="_blank">
                        <img src="/images/icons/fb.jpg" alt="Facebook">
                    </a>
                    <a href="https://www.tiktok.com/@shoppy006?lang=vi-VN" target="_blank">
                        <img src="/images/icons/tiktok.jpg" alt="TikTok">
                    </a>
                    <a href="http://www.youtube.com/@SHOPPY_Contact" target="_blank">
                        <img src="/images/icons/youtube.png" alt="YouTube">
                    </a>
                </div>
            </div>
        </div>

        <div class="footer-bottom">
            @ 2025 Shoppy ‚Äî Khoa CNTT, HCMUS
        </div>
    </footer>
    <!-- Th√™m modal ch·ªânh s·ª≠a review (ƒë·∫∑t tr∆∞·ªõc th·∫ª </body>) -->
    <div id="edit-review-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Ch·ªânh s·ª≠a ƒë√°nh gi√°</h3>
                <button class="close-btn" onclick="closeEditReviewModal()">√ó</button>
            </div>
            <div class="modal-body">
                <div class="star-rating-input" id="edit-rating-stars">
                    <input type="radio" id="edit-star5" name="edit-rating" value="5">
                    <label for="edit-star5" title="5 sao">‚òÖ</label>
                    <input type="radio" id="edit-star4" name="edit-rating" value="4">
                    <label for="edit-star4" title="4 sao">‚òÖ</label>
                    <input type="radio" id="edit-star3" name="edit-rating" value="3">
                    <label for="edit-star3" title="3 sao">‚òÖ</label>
                    <input type="radio" id="edit-star2" name="edit-rating" value="2">
                    <label for="edit-star2" title="2 sao">‚òÖ</label>
                    <input type="radio" id="edit-star1" name="edit-rating" value="1">
                    <label for="edit-star1" title="1 sao">‚òÖ</label>
                </div>
                <textarea id="edit-review-comment" placeholder="Nh·∫≠p n·ªôi dung ƒë√°nh gi√°..." rows="4"></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeEditReviewModal()">H·ªßy</button>
                <button class="btn-primary" onclick="updateReview()">L∆∞u thay ƒë·ªïi</button>
                <button class="btn-danger" onclick="confirmDeleteReview()" style="margin-left: 10px;">X√≥a</button>
            </div>
        </div>
    </div>

    <!-- Modal x√°c nh·∫≠n x√≥a -->
    <div id="confirm-delete-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3>X√°c nh·∫≠n x√≥a</h3>
                <button class="close-btn" onclick="closeConfirmDeleteModal()">√ó</button>
            </div>
            <div class="modal-body">
                <p>B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a ƒë√°nh gi√° n√†y kh√¥ng?</p>
                <p style="color: #666; font-size: 14px;">H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.</p>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeConfirmDeleteModal()">H·ªßy</button>
                <button class="btn-danger" onclick="deleteReview()">X√≥a</button>
            </div>
        </div>
    </div>
    <div id="full-page-loading" style="
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(255, 255, 255, 0.85); display: none; 
            justify-content: center; align-items: center; z-index: 10000;
        ">
        <div class="spinner"></div>
    </div>
    <div id="notification-toast" class="notification-toast">
        <div class="toast-content">
            <span class="toast-icon">‚úÖ</span>
            <span id="toast-message">ƒê√£ th√™m v√†o gi·ªè h√†ng th√†nh c√¥ng!</span>
        </div>
        <script src="js/supabase-init.js"></script>
        <script src="js/product-detail.js"></script>
</body>

</html>